import{_ as g,G as x,I,H as y,C as m,r,o as d,c as l,b as t,a as h,z as b,J as c,t as k,A as w,d as F,E as T,F as L}from"./index-1dde6d87.js";const S={components:{ContactCard:x,InputSearch:I,ContactList:y},data(){return{contacts:[],activeIndex:-1,searchText:"",message:""}},watch:{searchText(){this.activeIndex=-1}},computed:{contactFavoriteStrings(){return this.contacts.map(s=>{const{name:e,email:u,address:_,phone:o}=s;return[e,u,_,o].join("")})},filteredContacts(){return this.searchText?this.contacts.filter((s,e)=>this.contactFavoriteStrings[e].toLowerCase().includes(this.searchText)):this.contacts},activeContact(){return this.activeIndex<0?null:this.filteredContacts[this.activeIndex]},filteredContactsCount(){return this.filteredContacts.length}},methods:{async retrieveFavoriteContacts(){try{this.contacts=await m.getAllFavorite()}catch(s){console.log(s)}},refreshList(){this.retrieveFavoriteContacts(),this.activeIndex=-1},async removeAllFavoriteContacts(){if(confirm("Bạn muốn xóa tất cả liên hệ yêu thích?"))try{for(let s=0;s<this.filteredContactsCount;s++){let e=this.filteredContacts[s]._id;await m.delete(e),this.message="Xoá các liên hệ yêu thích thành công."}this.refreshList()}catch(s){console.log(s)}},goToAddContact(){this.$router.push({name:"contact.add"})}},mounted(){this.refreshList()}},i=s=>(T("data-v-4d3d8686"),s=s(),L(),s),A={class:"page row"},V={class:"col-md-10"},B={class:"mt-3 col-md-6"},N=i(()=>t("h4",null,[c(" Các danh bạ yêu thích "),t("i",{class:"fas fa-heart"})],-1)),j={key:1},E={class:"mt-3 row justify-content-around align-items-center"},H=i(()=>t("i",{class:"fas fa-smile"},null,-1)),U=i(()=>t("i",{class:"fas fa-plus"},null,-1)),X={class:"mt-3 row justify-content-around align-items-center"},z=i(()=>t("i",{class:"fas fa-exclamation"},null,-1)),D={class:"message"},G={class:"mt-3 col-md-6"},J={key:0},K=i(()=>t("h4",null,[c(" Chi tiết Liên hệ "),t("i",{class:"fas fa-address-card"})],-1)),q=i(()=>t("span",{class:"mt-2 badge badge-warning"},[t("i",{class:"fas fa-edit"}),c(" Hiệu chỉnh ")],-1));function M(s,e,u,_,o,n){const C=r("InputSearch"),v=r("ContactList"),f=r("ContactCard"),p=r("router-link");return d(),l("div",A,[t("div",V,[h(C,{modelValue:o.searchText,"onUpdate:modelValue":e[0]||(e[0]=a=>o.searchText=a)},null,8,["modelValue"])]),t("div",B,[N,n.filteredContactsCount>0?(d(),b(v,{key:0,contacts:n.filteredContacts,activeIndex:o.activeIndex,"onUpdate:activeIndex":e[1]||(e[1]=a=>o.activeIndex=a)},null,8,["contacts","activeIndex"])):(d(),l("p",j,"Không có liên hệ nào.")),t("div",E,[t("button",{class:"left btn btn-sm btn-primary",onClick:e[2]||(e[2]=a=>n.refreshList())},[H,c(" Làm mới ")]),t("button",{class:"right btn btn-sm btn-success",onClick:e[3]||(e[3]=(...a)=>n.goToAddContact&&n.goToAddContact(...a))},[U,c(" Thêm mới ")])]),t("div",X,[t("button",{class:"full-width btn btn-sm btn-danger",onClick:e[4]||(e[4]=(...a)=>n.removeAllFavoriteContacts&&n.removeAllFavoriteContacts(...a))},[z,c(" Xóa tất cả liên hệ yêu thích ")])]),t("p",D,k(o.message),1)]),t("div",G,[n.activeContact?(d(),l("div",J,[K,h(f,{contact:n.activeContact},null,8,["contact"]),h(p,{to:{name:"contact.edit",params:{id:n.activeContact._id}}},{default:w(()=>[q]),_:1},8,["to"])])):F("",!0)])])}const P=g(S,[["render",M],["__scopeId","data-v-4d3d8686"]]);export{P as default};
